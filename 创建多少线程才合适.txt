分情况
１. 计算密集型
线程数　＝　CPU核数＋１
加１是为了防止偶尔有内存页失效时，这个额外的线程可以顶上去，从而保证cpu利用率

２．IO密集型
最佳线程数 =CPU 核数 * [ 1 +（I/O 耗时 / CPU 耗时）]
可以这样理解：当前线程A完成IO操作时，其它线程正好完成了CPU计算的操作，此时CPU利用率正好达到了100%。
IO操作不消耗CPU.

注意，上面这些公式背后的目标其实就是将硬件的性能发挥到极致。
但实际还是需要压测结果，需要重点关注 CPU、I/O 设备的利用率和性能指标（响应时间、吞吐量）之间的关系。
